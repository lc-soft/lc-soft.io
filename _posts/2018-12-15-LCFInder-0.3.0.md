---
title: LC-Finder 0.3.0 Beta 开发日志
repo: lc-soft/LC-Finder
milestone: 5
---
## 2018-12-17
标记框已经完成，接下来是添加标记面板，然后将标记功能整合到图片查看器。标记面板需要展示已标记的区域信息列表和可添加的标记列表，实现起来比较简单，复杂的是后者，在图片切换时需要重置标记区域，缩放和移动图片浏览区域时需要更新标记框的位置和尺寸，两个功能模块的数据通信有些让人纠结。

## 2018-12-15

准备添加图像识别功能。之前有了解过 [TensorFlow](https://github.com/tensorflow/tensorflow)，它有提供 C、C++ 接口，也有现成的用 C++ 实现的[图片识别示例](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/label_image)，本打算将这个示例改用 C 接口实现然后给 LCFinder 调用，但看了 C 接口和相关资料后觉得很麻烦，比如 [TF_SessionRun()](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/c/c_api.h#L1393-L1430) 的参数需要什么内容，这些内容表示什么，怎么生成？无脑复制粘贴相关代码再凭感觉改会让人有点迷茫，在写代码前还是先了解 TensorFlow 的工作原理和相关示例代码好些。

现在打算用 [yolo](https://pjreddie.com/darknet/yolo/) 来实现图像识别功能，官方示例的效果能够标记出图片中的对象和名称，正好符合需求。

[![yolo example](https://pjreddie.com/media/image/Screen_Shot_2018-03-24_at_10.48.42_PM.png "yolo example")](https://pjreddie.com/media/image/Screen_Shot_2018-03-24_at_10.48.42_PM.png)

在添加图像识别功能之前需要给 LCFinder 加上区域标记功能，能够像 [Yolo_mark](https://github.com/AlexeyAB/Yolo_mark) 一样标记图片中各个对象的边界框并输出到文件，以便使用 darknet 训练 yolo 模型。

[![yolo mark](https://camo.githubusercontent.com/e1e33a7ef92dfc86ab8929dd0e8e96395cbcab5c/68747470733a2f2f686162726173746f726167652e6f72672f66696c65732f3232392f6630362f3237372f32323966303632373766636334393237393334326237656466616262623437612e6a7067 "yolo mark")](https://camo.githubusercontent.com/e1e33a7ef92dfc86ab8929dd0e8e96395cbcab5c/68747470733a2f2f686162726173746f726167652e6f72672f66696c65732f3232392f6630362f3237372f32323966303632373766636334393237393334326237656466616262623437612e6a7067)

LCFinder 的图片查看器是把图片当成背景图来呈现的，不是一个单独的部件，如何定位已标记的边界框并根据缩放比例调整它的尺寸？

标记框要做成四边+四角可拖动调整尺寸的话有点麻烦，简单点，只允许点击拖动右下角来调整框的尺寸。